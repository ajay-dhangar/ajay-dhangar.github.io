"use strict";(self.webpackChunkcode_harbor_hub=self.webpackChunkcode_harbor_hub||[]).push([[12452],{57248:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>p,frontMatter:()=>i,metadata:()=>s,toc:()=>c});var r=t(17624),o=t(4552);const i={id:"proxying-api-requests-in-development",title:"Proxying API Requests in Development",sidebar_label:"Proxying API Requests",sidebar_position:1,tags:["React","API","Backend","Integration","Proxy"],keywords:["react","api","backend","integration","proxy","proxying","cors","development","server","client","frontend","backend","fullstack","web development","javascript","node.js","express","rest","json","asynchronous","promise","async","await","state","useEffect","useState","form","submit","create","update","delete","fetch","send","receive","response","error","axios","library","package","npm","install","tool","postman","testing","endpoint","list","data","new","component","app","file","code","example","tutorial","guide","how-to","learn","step-by-step","beginner","basics","introduction","overview","explanation","example","code","source","snippet","tutorial","guide","learn","how-to","steps"],description:"Learn how to proxy API requests during development in a React app using Create React App, avoiding CORS issues and enabling seamless interaction with your backend server."},a=void 0,s={id:"react/back-end-integration/proxying-api-requests-in-development",title:"Proxying API Requests in Development",description:"Learn how to proxy API requests during development in a React app using Create React App, avoiding CORS issues and enabling seamless interaction with your backend server.",source:"@site/docs/react/back-end-integration/proxying-api-requests-in-development.md",sourceDirName:"react/back-end-integration",slug:"/react/back-end-integration/proxying-api-requests-in-development",permalink:"/code-harbor-hub/docs/react/back-end-integration/proxying-api-requests-in-development",draft:!1,unlisted:!1,editUrl:"https://github.com/Ajay-Dhangar/code-harbor-hub/edit/main/docs/react/back-end-integration/proxying-api-requests-in-development.md",tags:[{label:"React",permalink:"/code-harbor-hub/docs/tags/react"},{label:"API",permalink:"/code-harbor-hub/docs/tags/api"},{label:"Backend",permalink:"/code-harbor-hub/docs/tags/backend"},{label:"Integration",permalink:"/code-harbor-hub/docs/tags/integration"},{label:"Proxy",permalink:"/code-harbor-hub/docs/tags/proxy"}],version:"current",lastUpdatedBy:"ajay-dhangar",lastUpdatedAt:1710610499,formattedLastUpdatedAt:"Mar 16, 2024",sidebarPosition:1,frontMatter:{id:"proxying-api-requests-in-development",title:"Proxying API Requests in Development",sidebar_label:"Proxying API Requests",sidebar_position:1,tags:["React","API","Backend","Integration","Proxy"],keywords:["react","api","backend","integration","proxy","proxying","cors","development","server","client","frontend","backend","fullstack","web development","javascript","node.js","express","rest","json","asynchronous","promise","async","await","state","useEffect","useState","form","submit","create","update","delete","fetch","send","receive","response","error","axios","library","package","npm","install","tool","postman","testing","endpoint","list","data","new","component","app","file","code","example","tutorial","guide","how-to","learn","step-by-step","beginner","basics","introduction","overview","explanation","example","code","source","snippet","tutorial","guide","learn","how-to","steps"],description:"Learn how to proxy API requests during development in a React app using Create React App, avoiding CORS issues and enabling seamless interaction with your backend server."},sidebar:"react",previous:{title:"Back End Integration",permalink:"/code-harbor-hub/docs/category/back-end-integration-1"},next:{title:"Fetching Data",permalink:"/code-harbor-hub/docs/react/back-end-integration/fetching-data-with-ajax-requests"}},d={},c=[{value:"Introduction:",id:"introduction",level:2},{value:"Section 1: Setting up a Create React App project",id:"section-1-setting-up-a-create-react-app-project",level:2},{value:"Step 1: Install Create React App",id:"step-1-install-create-react-app",level:3},{value:"Step 2: Navigate to your project",id:"step-2-navigate-to-your-project",level:3},{value:"Step 3: Start the development server",id:"step-3-start-the-development-server",level:3},{value:"Section 2: Understanding the need for proxying API requests",id:"section-2-understanding-the-need-for-proxying-api-requests",level:2},{value:"What is Proxying in Development?",id:"what-is-proxying-in-development",level:2},{value:"Setting Up Proxying",id:"setting-up-proxying",level:2},{value:"Section 3: Configuring proxy in Create React App",id:"section-3-configuring-proxy-in-create-react-app",level:2},{value:"Step 1: Create a <code>setupProxy.js</code> file",id:"step-1-create-a-setupproxyjs-file",level:3},{value:"Step 2: Install http-proxy-middleware",id:"step-2-install-http-proxy-middleware",level:3},{value:"Step 3: Proxy configuration",id:"step-3-proxy-configuration",level:3},{value:"Section 4: Fetching data from the API",id:"section-4-fetching-data-from-the-api",level:2},{value:"&quot;Invalid Host Header&quot; Error and How to Handle It",id:"invalid-host-header-error-and-how-to-handle-it",level:2},{value:"Configuring the Proxy Manually (Advanced Option)",id:"configuring-the-proxy-manually-advanced-option",level:2},{value:"Conclusion:",id:"conclusion",level:2}];function l(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",...(0,o.M)(),...e.components},{BrowserWindow:t}=n;return t||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("BrowserWindow",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:["When building a React app, you might encounter a common scenario where your frontend and backend are served from different hosts or ports. This separation could lead to ",(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS",children:"CORS issues"})," during development, causing your API requests to fail and producing error messages in your browser console."]}),"\n",(0,r.jsx)(n.p,{children:"To tackle this problem and make your development process smoother, Create React App offers a straightforward way to proxy API requests during development. In this guide, we'll explore how to set up proxying, understand its benefits, and handle some common issues that might arise."}),"\n",(0,r.jsx)(n.h2,{id:"introduction",children:"Introduction:"}),"\n",(0,r.jsx)(n.p,{children:"In this guide, we'll explore how to efficiently handle API requests during the development of your React app using Create React App (CRA). Proxying API requests is a crucial step to avoid CORS issues and seamlessly interact with your backend server while developing locally. We'll break down the process step-by-step and sprinkle in some fun details to make your learning journey enjoyable!"}),"\n",(0,r.jsx)(n.h2,{id:"section-1-setting-up-a-create-react-app-project",children:"Section 1: Setting up a Create React App project"}),"\n",(0,r.jsx)(n.p,{children:"Before we delve into proxying API requests, let's set up a new Create React App project to get started:"}),"\n",(0,r.jsx)(n.h3,{id:"step-1-install-create-react-app",children:"Step 1: Install Create React App"}),"\n",(0,r.jsx)(n.p,{children:"First, ensure you have Node.js and npm installed on your machine. Open your terminal and run the following command:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"npx create-react-app my-react-app\n"})}),"\n",(0,r.jsx)(n.h3,{id:"step-2-navigate-to-your-project",children:"Step 2: Navigate to your project"}),"\n",(0,r.jsx)(n.p,{children:"Next, move into your newly created project directory:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd my-react-app\n"})}),"\n",(0,r.jsx)(n.h3,{id:"step-3-start-the-development-server",children:"Step 3: Start the development server"}),"\n",(0,r.jsx)(n.p,{children:"To launch your React app in development mode, run:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"npm start\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Now your app should be running at ",(0,r.jsx)(n.code,{children:"http://localhost:3000/"}),"."]}),"\n",(0,r.jsx)(t,{children:(0,r.jsx)("div",{style:{textAlign:"center"},children:(0,r.jsxs)("header",{style:{minHeight:"80vh",display:" flex",flexDirection:"column",alignItems:"center",justifyContent:"center",fontSize:"calc(10px + 2vmin)"},children:[(0,r.jsx)("img",{src:"/code-harbor-hub/img/docs/react/logo.svg",className:"App-logo",alt:"logo"}),(0,r.jsx)("br",{}),(0,r.jsx)("p",{children:(0,r.jsx)(n.p,{children:"Edit src/App.js and save to reload."})}),(0,r.jsx)("a",{style:{color:"#61dafb"},href:"https://reactjs.org",target:"_blank",rel:"noopener noreferrer",children:(0,r.jsx)(n.p,{children:"Learn React"})})]})})}),"\n",(0,r.jsx)(n.h2,{id:"section-2-understanding-the-need-for-proxying-api-requests",children:"Section 2: Understanding the need for proxying API requests"}),"\n",(0,r.jsx)(n.p,{children:"When you develop a React app, you'll often need to fetch data from an API hosted on a different domain or port. Browsers enforce a security feature called the Same-Origin Policy, which restricts cross-origin requests. As a result, you might encounter CORS errors when trying to access the API directly from your React app."}),"\n",(0,r.jsx)(n.p,{children:"Proxying solves this problem by creating a tunnel between your frontend and backend, allowing you to make requests as if they were originating from the same domain."}),"\n",(0,r.jsx)(n.h2,{id:"what-is-proxying-in-development",children:"What is Proxying in Development?"}),"\n",(0,r.jsxs)(n.p,{children:["Proxying is a technique used to redirect certain requests from one server to another. In the context of Create React App, we can use proxying to redirect our API requests from the development server (running on, for example, ",(0,r.jsx)(n.code,{children:"http://localhost:3000"}),") to our backend server (e.g., ",(0,r.jsx)(n.code,{children:"http://localhost:4000"}),")."]}),"\n",(0,r.jsx)(n.p,{children:"By setting up a proxy, you can avoid CORS-related headaches during development and make API requests as if they were coming from the same host and port as your frontend, simplifying your code and making your development environment more comfortable."}),"\n",(0,r.jsx)(n.h2,{id:"setting-up-proxying",children:"Setting Up Proxying"}),"\n",(0,r.jsx)(n.p,{children:"Create React App makes proxying API requests incredibly easy. To get started, follow these steps:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Locate the ",(0,r.jsx)(n.code,{children:"proxy"})," Field:"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["In your React app's ",(0,r.jsx)(n.code,{children:"package.json"})," file, add a ",(0,r.jsx)(n.code,{children:"proxy"})," field. This field specifies the address of your backend API server."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",metastring:'title="package.json"',children:'{\n  "name": "your-react-app",\n  "version": "x.x.x",\n  "proxy": "http://localhost:4000",\n  // ... other configurations ...\n}\n'})}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsx)(n.li,{children:"Restart the Development Server:"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Once you've added the ",(0,r.jsx)(n.code,{children:"proxy"})," field, stop your development server (if it's running) and start it again using the command ",(0,r.jsx)(n.code,{children:"npm start"}),". This will activate the proxy settings and enable you to make API requests from your React app without encountering CORS issues."]}),"\n",(0,r.jsx)(n.h2,{id:"section-3-configuring-proxy-in-create-react-app",children:"Section 3: Configuring proxy in Create React App"}),"\n",(0,r.jsx)(n.p,{children:"Now, let's configure the proxy for our API requests in the Create React App project:"}),"\n",(0,r.jsxs)(n.h3,{id:"step-1-create-a-setupproxyjs-file",children:["Step 1: Create a ",(0,r.jsx)(n.code,{children:"setupProxy.js"})," file"]}),"\n",(0,r.jsxs)(n.p,{children:["Inside the ",(0,r.jsx)(n.code,{children:"src"})," folder of your project, create a file named ",(0,r.jsx)(n.code,{children:"setupProxy.js"}),". This file will contain our proxy configuration."]}),"\n",(0,r.jsx)(n.h3,{id:"step-2-install-http-proxy-middleware",children:"Step 2: Install http-proxy-middleware"}),"\n",(0,r.jsxs)(n.p,{children:["To set up the proxy, we need a middleware package called ",(0,r.jsx)(n.code,{children:"http-proxy-middleware"}),". Install it by running:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"npm install http-proxy-middleware --save\n"})}),"\n",(0,r.jsx)(n.h3,{id:"step-3-proxy-configuration",children:"Step 3: Proxy configuration"}),"\n",(0,r.jsxs)(n.p,{children:["In the ",(0,r.jsx)(n.code,{children:"setupProxy.js"})," file, add the following code to set up the proxy for your API:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",metastring:'title="setupProxy.js "',children:"const { createProxyMiddleware } = require('http-proxy-middleware');\n\nmodule.exports = function(app) {\n  app.use(\n    '/api',\n    createProxyMiddleware({\n      target: 'http://your-backend-server.com',\n      changeOrigin: true,\n    })\n  );\n};\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Replace ",(0,r.jsx)(n.code,{children:"'http://your-backend-server.com'"})," with the base URL of your backend server."]}),"\n",(0,r.jsx)(n.h2,{id:"section-4-fetching-data-from-the-api",children:"Section 4: Fetching data from the API"}),"\n",(0,r.jsx)(n.p,{children:"With the proxy set up, you can now fetch data from your backend server without worrying about CORS issues. Let's create a sample API request to illustrate this:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",metastring:'title="App.js"',children:"import React, { useState, useEffect } from 'react';\n\nfunction App() {\n  const [data, setData] = useState([]);\n\n  useEffect(() => {\n    fetch('/api/data') // This will be proxied to 'http://your-backend-server.com/api/data'\n      .then((response) => response.json())\n      .then((data) => setData(data))\n      .catch((error) => console.error('Error fetching data:', error));\n  }, []);\n\n  return (\n    <div>\n      <h1>Welcome to My React App</h1>\n      <ul>\n        {data.map((item) => (\n          <li key={item.id}>{item.name}</li>\n        ))}\n      </ul>\n    </div>\n  );\n}\n\nexport default App;\n"})}),"\n",(0,r.jsx)(n.h2,{id:"invalid-host-header-error-and-how-to-handle-it",children:'"Invalid Host Header" Error and How to Handle It'}),"\n",(0,r.jsx)(n.p,{children:'In some cases, after configuring the proxy, you might encounter an "Invalid Host Header" error when developing remotely. This issue arises due to stricter host checks to prevent DNS rebinding attacks.'}),"\n",(0,r.jsxs)(n.p,{children:["To resolve this error, create a ",(0,r.jsx)(n.code,{children:".env.development"})," file at the root of your project and specify your public development host:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"HOST=mypublicdevhost.com\n"})}),"\n",(0,r.jsx)(n.p,{children:"Restart the development server, and the error should disappear."}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsx)(n.p,{children:"If you're using a more exotic environment like a cloud editor, you can bypass the host check entirely, but this is risky and not recommended:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ini",children:"# NOTE: THIS IS DANGEROUS!\n# It exposes your machine to attacks from the websites you visit.\nDANGEROUSLY_DISABLE_HOST_CHECK=true\n"})}),"\n",(0,r.jsx)(n.p,{children:"Use this approach with caution and only when necessary."}),"\n",(0,r.jsx)(n.h2,{id:"configuring-the-proxy-manually-advanced-option",children:"Configuring the Proxy Manually (Advanced Option)"}),"\n",(0,r.jsxs)(n.p,{children:["While the built-in ",(0,r.jsx)(n.code,{children:"proxy"})," field in ",(0,r.jsx)(n.code,{children:"package.json"})," works well for most cases, there might be situations where you need more flexibility. In such cases, you can configure the proxy manually by setting up a ",(0,r.jsx)(n.code,{children:"setupProxy.js"})," file in your ",(0,r.jsx)(n.code,{children:"src"})," directory."]}),"\n",(0,r.jsx)(n.p,{children:"Here's how:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Install ",(0,r.jsx)(n.code,{children:"http-proxy-middleware"}),":"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"$ npm install http-proxy-middleware --save\n$ # or\n$ yarn add http-proxy-middleware\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsxs)(n.li,{children:["Create ",(0,r.jsx)(n.code,{children:"src/setupProxy.js"}),":"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"const { createProxyMiddleware } = require('http-proxy-middleware');\n\nmodule.exports = function (app) {\n  app.use(\n    '/api',\n    createProxyMiddleware({\n      target: 'http://localhost:5000',\n      changeOrigin: true,\n    })\n  );\n};\n"})}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsx)(n.p,{children:"This file is automatically registered when you start the development server, so there's no need to import it elsewhere."})}),"\n",(0,r.jsx)(n.p,{children:"By using the manual setup, you gain more control over your proxy configuration, allowing for advanced routing and customization."}),"\n",(0,r.jsxs)(n.admonition,{title:"Additional Configuration",type:"tip",children:[(0,r.jsx)(n.p,{children:"For more advanced use cases, you can configure multiple proxies, custom headers, and other options."}),(0,r.jsxs)(n.p,{children:["Check out the ",(0,r.jsx)(n.a,{href:"https://create-react-app.dev/docs/proxying-api-requests-in-development/#configuring-the-proxy-manually",children:"official documentation"})," for detailed information on manual proxy configuration."]})]}),"\n",(0,r.jsx)(n.h2,{id:"conclusion",children:"Conclusion:"}),"\n",(0,r.jsx)(n.p,{children:"Congratulations! You've successfully learned how to proxy API requests during development with Create React App. By using proxying, you've simplified your development environment and avoided troublesome CORS issues."}),"\n",(0,r.jsxs)(n.p,{children:["Whether you choose the built-in ",(0,r.jsx)(n.code,{children:"proxy"})," field or the more flexible manual setup, understanding how to handle API requests effectively will boost your productivity and make building React apps a delightful experience."]}),"\n",(0,r.jsx)(n.p,{children:"Now that you've mastered proxying, you're ready to build amazing apps with seamless frontend-backend communication. Keep coding and have fun!"})]})}function p(e={}){const{wrapper:n}={...(0,o.M)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},4552:(e,n,t)=>{t.d(n,{I:()=>s,M:()=>a});var r=t(11504);const o={},i=r.createContext(o);function a(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);