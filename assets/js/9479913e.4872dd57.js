"use strict";(self.webpackChunkcode_harbor_hub=self.webpackChunkcode_harbor_hub||[]).push([[23528],{10376:(e,r,a)=>{a.r(r),a.d(r,{assets:()=>c,contentTitle:()=>o,default:()=>p,frontMatter:()=>l,metadata:()=>i,toc:()=>s});var n=a(17624),t=a(4552);const l={id:"adding-relay",title:"Adding Relay",sidebar_position:7,tags:["react","relay","graphql","create react app","data fetching","data management","efficient","performance","batching","coalescing","over-fetching","server","client","network","environment","store","query","fragment","component","routing","react-router-dom","react-router","react-router-config","react-relay","graphql","relay-runtime","relay-environment-provider","relay-environment","relay-query","relay-fragment","relay-component","relay-routing","relay-graphql","relay-optimization","relay-performance","relay-batching","relay-coalescing","relay-over-fetching","relay-server","relay-client","relay-network","relay-environment","relay-store","relay-query","relay-fragment","relay-component","relay-routing","relay-graphql","relay-optimization","relay-performance","relay-batching","relay-coalescing","relay-over-fetching","relay-server","relay-client","relay-network","relay-environment","relay-store","relay-query","relay-fragment","relay-component","relay-routing","relay-graphql","relay-optimization","relay-performance","relay-batching","relay-coalescing","relay-over-fetching","relay-server","relay-client","relay-network","relay-environment","relay-store","relay-query","relay-fragment","relay-component","relay-routing","relay-graphql","relay-optimization","relay-performance","relay-batching","relay-coalescing","relay-over-fetching","relay-server","relay-client","relay-network","relay-environment","relay-store","relay-query","relay-fragment","relay-component","relay-routing","relay-graphql","relay-optimization","relay-performance","relay-batching","relay-coalescing","relay-over-fetching","relay-server","relay-client","relay-network","relay-environment","relay-store","relay-query","relay-fragment","relay-component","relay-routing","relay-graphql","relay-optimization","relay-performance","relay-batching","relay-coalescing","relay-over-fetching","relay-server","relay-client","relay-network","relay-environment","relay-store","relay-query","relay-fragment","relay-component","relay-routing","relay-graphql","relay-optimization","relay-performance","relay-batching","relay-coalescing","relay-over-fetching","relay-server","relay-client","relay-network","relay-environment","relay-store","relay-query","relay-fragment","relay-component","relay-routing","relay-graphql","relay-optimization","relay-performance","relay-batching","relay-coalescing","relay-over-fetching"],description:"Learn how to integrate Relay into your Create React App, enabling efficient data fetching and management from a GraphQL server in your React applications."},o=void 0,i={id:"react/building-your-app/adding-relay",title:"Adding Relay",description:"Learn how to integrate Relay into your Create React App, enabling efficient data fetching and management from a GraphQL server in your React applications.",source:"@site/docs/react/building-your-app/adding-relay.md",sourceDirName:"react/building-your-app",slug:"/react/building-your-app/adding-relay",permalink:"/docs/react/building-your-app/adding-relay",draft:!1,unlisted:!1,editUrl:"https://github.com/Ajay-Dhangar/code-harbor-hub/edit/main/docs/react/building-your-app/adding-relay.md",tags:[{label:"react",permalink:"/docs/tags/react"},{label:"relay",permalink:"/docs/tags/relay"},{label:"graphql",permalink:"/docs/tags/graphql"},{label:"create react app",permalink:"/docs/tags/create-react-app"},{label:"data fetching",permalink:"/docs/tags/data-fetching"},{label:"data management",permalink:"/docs/tags/data-management"},{label:"efficient",permalink:"/docs/tags/efficient"},{label:"performance",permalink:"/docs/tags/performance"},{label:"batching",permalink:"/docs/tags/batching"},{label:"coalescing",permalink:"/docs/tags/coalescing"},{label:"over-fetching",permalink:"/docs/tags/over-fetching"},{label:"server",permalink:"/docs/tags/server"},{label:"client",permalink:"/docs/tags/client"},{label:"network",permalink:"/docs/tags/network"},{label:"environment",permalink:"/docs/tags/environment"},{label:"store",permalink:"/docs/tags/store"},{label:"query",permalink:"/docs/tags/query"},{label:"fragment",permalink:"/docs/tags/fragment"},{label:"component",permalink:"/docs/tags/component"},{label:"routing",permalink:"/docs/tags/routing"},{label:"react-router-dom",permalink:"/docs/tags/react-router-dom"},{label:"react-router",permalink:"/docs/tags/react-router"},{label:"react-router-config",permalink:"/docs/tags/react-router-config"},{label:"react-relay",permalink:"/docs/tags/react-relay"},{label:"relay-runtime",permalink:"/docs/tags/relay-runtime"},{label:"relay-environment-provider",permalink:"/docs/tags/relay-environment-provider"},{label:"relay-environment",permalink:"/docs/tags/relay-environment"},{label:"relay-query",permalink:"/docs/tags/relay-query"},{label:"relay-fragment",permalink:"/docs/tags/relay-fragment"},{label:"relay-component",permalink:"/docs/tags/relay-component"},{label:"relay-routing",permalink:"/docs/tags/relay-routing"},{label:"relay-graphql",permalink:"/docs/tags/relay-graphql"},{label:"relay-optimization",permalink:"/docs/tags/relay-optimization"},{label:"relay-performance",permalink:"/docs/tags/relay-performance"},{label:"relay-batching",permalink:"/docs/tags/relay-batching"},{label:"relay-coalescing",permalink:"/docs/tags/relay-coalescing"},{label:"relay-over-fetching",permalink:"/docs/tags/relay-over-fetching"},{label:"relay-server",permalink:"/docs/tags/relay-server"},{label:"relay-client",permalink:"/docs/tags/relay-client"},{label:"relay-network",permalink:"/docs/tags/relay-network"},{label:"relay-store",permalink:"/docs/tags/relay-store"}],version:"current",lastUpdatedBy:"ajay-dhangar",lastUpdatedAt:1710610499e3,sidebarPosition:7,frontMatter:{id:"adding-relay",title:"Adding Relay",sidebar_position:7,tags:["react","relay","graphql","create react app","data fetching","data management","efficient","performance","batching","coalescing","over-fetching","server","client","network","environment","store","query","fragment","component","routing","react-router-dom","react-router","react-router-config","react-relay","graphql","relay-runtime","relay-environment-provider","relay-environment","relay-query","relay-fragment","relay-component","relay-routing","relay-graphql","relay-optimization","relay-performance","relay-batching","relay-coalescing","relay-over-fetching","relay-server","relay-client","relay-network","relay-environment","relay-store","relay-query","relay-fragment","relay-component","relay-routing","relay-graphql","relay-optimization","relay-performance","relay-batching","relay-coalescing","relay-over-fetching","relay-server","relay-client","relay-network","relay-environment","relay-store","relay-query","relay-fragment","relay-component","relay-routing","relay-graphql","relay-optimization","relay-performance","relay-batching","relay-coalescing","relay-over-fetching","relay-server","relay-client","relay-network","relay-environment","relay-store","relay-query","relay-fragment","relay-component","relay-routing","relay-graphql","relay-optimization","relay-performance","relay-batching","relay-coalescing","relay-over-fetching","relay-server","relay-client","relay-network","relay-environment","relay-store","relay-query","relay-fragment","relay-component","relay-routing","relay-graphql","relay-optimization","relay-performance","relay-batching","relay-coalescing","relay-over-fetching","relay-server","relay-client","relay-network","relay-environment","relay-store","relay-query","relay-fragment","relay-component","relay-routing","relay-graphql","relay-optimization","relay-performance","relay-batching","relay-coalescing","relay-over-fetching","relay-server","relay-client","relay-network","relay-environment","relay-store","relay-query","relay-fragment","relay-component","relay-routing","relay-graphql","relay-optimization","relay-performance","relay-batching","relay-coalescing","relay-over-fetching","relay-server","relay-client","relay-network","relay-environment","relay-store","relay-query","relay-fragment","relay-component","relay-routing","relay-graphql","relay-optimization","relay-performance","relay-batching","relay-coalescing","relay-over-fetching"],description:"Learn how to integrate Relay into your Create React App, enabling efficient data fetching and management from a GraphQL server in your React applications."},sidebar:"react",previous:{title:"Adding TypeScript",permalink:"/docs/react/building-your-app/adding-typescript"},next:{title:"Adding a Router",permalink:"/docs/react/building-your-app/adding-a-router"}},c={},s=[{value:"Introduction to Relay",id:"introduction-to-relay",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Adding Relay to Your Create React App",id:"adding-relay-to-your-create-react-app",level:2},{value:"Step 1: Install Dependencies",id:"step-1-install-dependencies",level:3},{value:"Step 2: Setup Relay Environment",id:"step-2-setup-relay-environment",level:3},{value:"Step 3: Update index.js",id:"step-3-update-indexjs",level:3},{value:"Step 4: Writing Your First Relay Query",id:"step-4-writing-your-first-relay-query",level:3},{value:"Step 5: Create a Relay Query Component",id:"step-5-create-a-relay-query-component",level:3},{value:"Step 6: Add Routing (Optional)",id:"step-6-add-routing-optional",level:3},{value:"Step 7: Start Your App",id:"step-7-start-your-app",level:3},{value:"Conclusion",id:"conclusion",level:2}];function y(e){const r={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",...(0,t.M)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.h2,{id:"introduction-to-relay",children:"Introduction to Relay"}),"\n",(0,n.jsx)(r.p,{children:"Relay is a powerful GraphQL client framework developed by Facebook. It allows you to efficiently fetch and manage data from a GraphQL server in your React applications. Relay optimizes data fetching by batching and coalescing requests, reducing over-fetching and making your app more performant."}),"\n",(0,n.jsx)(r.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,n.jsx)(r.p,{children:"Before we begin, make sure you have the following installed:"}),"\n",(0,n.jsxs)(r.ol,{children:["\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsxs)(r.p,{children:["Node.js and npm (Node Package Manager) - You can download it from the official website: ",(0,n.jsx)(r.a,{href:"https://nodejs.org/",children:"https://nodejs.org/"})]}),"\n"]}),"\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsx)(r.p,{children:"Create React App - You can create a new React application using Create React App with the following command in your terminal:"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-bash",children:"npx create-react-app my-relay-app\ncd my-relay-app\n"})}),"\n"]}),"\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsx)(r.p,{children:"Basic knowledge of React and GraphQL will be helpful, but we'll try to explain everything in a beginner-friendly way."}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(r.h2,{id:"adding-relay-to-your-create-react-app",children:"Adding Relay to Your Create React App"}),"\n",(0,n.jsx)(r.p,{children:"Let's integrate Relay into your Create React App project."}),"\n",(0,n.jsx)(r.h3,{id:"step-1-install-dependencies",children:"Step 1: Install Dependencies"}),"\n",(0,n.jsx)(r.p,{children:"Open your terminal, navigate to your project directory, and install the necessary packages:"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-bash",children:"npm install relay react-relay\n"})}),"\n",(0,n.jsx)(r.h3,{id:"step-2-setup-relay-environment",children:"Step 2: Setup Relay Environment"}),"\n",(0,n.jsxs)(r.p,{children:["Relay requires a network layer to communicate with your GraphQL server. For this example, we'll use the GitHub GraphQL API. Open your ",(0,n.jsx)(r.code,{children:"src"})," folder and create a new file named ",(0,n.jsx)(r.code,{children:"relay-environment.js"}),":"]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-javascript",metastring:'title="src/relay-environment.js" ',children:"\nimport { Environment, Network, RecordSource, Store } from 'relay-runtime';\n\nasync function fetchGraphQL(operation, variables) {\n  const response = await fetch('https://api.github.com/graphql', {\n    method: 'POST',\n    headers: {\n      Authorization: 'Bearer YOUR_GITHUB_ACCESS_TOKEN', // Replace with your GitHub access token\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({\n      query: operation.text,\n      variables,\n    }),\n  });\n  return await response.json();\n}\n\nconst environment = new Environment({\n  network: Network.create(fetchGraphQL),\n  store: new Store(new RecordSource()),\n});\nexport default environment;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Replace ",(0,n.jsx)(r.code,{children:"YOUR_GITHUB_ACCESS_TOKEN"})," with a valid GitHub Personal Access Token. You can create one by following the steps in this guide: ",(0,n.jsx)(r.a,{href:"https://docs.github.com/en/authentication/creating-a-personal-access-token",children:"https://docs.github.com/en/authentication/creating-a-personal-access-token"}),"."]}),"\n",(0,n.jsx)(r.h3,{id:"step-3-update-indexjs",children:"Step 3: Update index.js"}),"\n",(0,n.jsxs)(r.p,{children:["Now, let's make sure our app uses the Relay environment. Open ",(0,n.jsx)(r.code,{children:"src/index.js"})," and update it as follows:"]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-javascript",metastring:'title="src/index.js"',children:"\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { RelayEnvironmentProvider } from 'react-relay';\nimport environment from './relay-environment';\nimport App from './App';\n\nReactDOM.render(\n  <RelayEnvironmentProvider environment={environment}>\n    <App />\n  </RelayEnvironmentProvider>,\n  document.getElementById('root')\n);\n"})}),"\n",(0,n.jsx)(r.h3,{id:"step-4-writing-your-first-relay-query",children:"Step 4: Writing Your First Relay Query"}),"\n",(0,n.jsxs)(r.p,{children:["In this example, we'll fetch a user's details from the GitHub API using Relay. Create a new file named ",(0,n.jsx)(r.code,{children:"User.js"})," inside the ",(0,n.jsx)(r.code,{children:"src"})," folder:"]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-javascript",metastring:'title"src/User.js"',children:"\nimport React from 'react';\nimport { graphql, useFragment } from 'react-relay';\n\nconst userFragment = graphql`\n  fragment User_user on User {\n    name\n    login\n    avatarUrl\n  }\n`;\n\nfunction User(props) {\n  const user = useFragment(userFragment, props.user);\n  return (\n    <div>\n      <img src={user.avatarUrl} alt={user.name} />\n      <h2>{user.name}</h2>\n      <p>{user.login}</p>\n    </div>\n  );\n}\n\nexport default User;\n"})}),"\n",(0,n.jsx)(r.h3,{id:"step-5-create-a-relay-query-component",children:"Step 5: Create a Relay Query Component"}),"\n",(0,n.jsxs)(r.p,{children:["Now, let's create a component that uses the ",(0,n.jsx)(r.code,{children:"User"})," component and fetches the data using Relay. Create a new file named ",(0,n.jsx)(r.code,{children:"Profile.js"})," inside the ",(0,n.jsx)(r.code,{children:"src"})," folder:"]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-javascript",metastring:'title="src/Profile.js"',children:"\nimport React from 'react';\nimport { graphql, useLazyLoadQuery } from 'react-relay';\n\nconst profileQuery = graphql`\n  query ProfileQuery {\n    viewer {\n      ...User_user\n    }\n  }\n`;\n\nfunction Profile() {\n  const data = useLazyLoadQuery(profileQuery, {});\n  return <User user={data.viewer} />;\n}\n\nexport default Profile;\n"})}),"\n",(0,n.jsx)(r.h3,{id:"step-6-add-routing-optional",children:"Step 6: Add Routing (Optional)"}),"\n",(0,n.jsxs)(r.p,{children:["To view the user profile, we'll add routing to your app using ",(0,n.jsx)(r.code,{children:"react-router-dom"}),". First, install the package:"]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-bash",children:"npm install react-router-dom\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Then, update ",(0,n.jsx)(r.code,{children:"src/App.js"}),":"]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-javascript",metastring:'title="src/App.js"',children:'\nimport React from \'react\';\nimport { BrowserRouter as Router, Route, Switch, Link } from \'react-router-dom\';\nimport Profile from \'./Profile\';\n\nfunction App() {\n  return (\n    <Router>\n      <div>\n        <nav>\n          <ul>\n            <li>\n              <Link to="/">Home</Link>\n            </li>\n            <li>\n              <Link to="/profile">Profile</Link>\n            </li>\n          </ul>\n        </nav>\n\n        <Switch>\n          <Route path="/profile">\n            <Profile />\n          </Route>\n          <Route path="/">\n            <h1>Welcome to My Relay App</h1>\n          </Route>\n        </Switch>\n      </div>\n    </Router>\n  );\n}\n\nexport default App;\n'})}),"\n",(0,n.jsx)(r.h3,{id:"step-7-start-your-app",children:"Step 7: Start Your App"}),"\n",(0,n.jsx)(r.p,{children:"Now, you're all set! Save your changes and start your app:"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-bash",children:"npm start\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Visit ",(0,n.jsx)(r.code,{children:"http://localhost:3000/profile"})," to see your Relay-powered user profile page!"]}),"\n",(0,n.jsx)(r.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,n.jsx)(r.p,{children:"Congratulations! You've successfully integrated Relay into your Create React App and fetched data from the GitHub API. This is just the beginning of what Relay can do for your React applications. Continue exploring Relay's documentation and its powerful features to take your app to the next level."}),"\n",(0,n.jsx)(r.admonition,{title:"Info",type:"tip",children:(0,n.jsx)(r.p,{children:"Remember to replace the GitHub API with your own GraphQL API to experiment further with Relay. Happy coding!"})})]})}function p(e={}){const{wrapper:r}={...(0,t.M)(),...e.components};return r?(0,n.jsx)(r,{...e,children:(0,n.jsx)(y,{...e})}):y(e)}},4552:(e,r,a)=>{a.d(r,{I:()=>i,M:()=>o});var n=a(11504);const t={},l=n.createContext(t);function o(e){const r=n.useContext(l);return n.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function i(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),n.createElement(l.Provider,{value:r},e.children)}}}]);